<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø³Ø§Ø·ÙŠØ± Ù…ÙØªØ±Ù‚ Ø§Ù„Ø·Ø±Ù‚ | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠØ©</title>
    <style>
        :root { --gold: #c5a021; --gold-light: #f3cf5f; --bg: #05070a; --card: #111827; --text: #f3f4f6; }
        body { font-family: 'Cairo', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; display: flex; justify-content: center; min-height: 100vh; }
        #game-container { width: 100%; max-width: 800px; background: var(--card); border-left: 2px solid var(--gold); border-right: 2px solid var(--gold); padding: 20px; box-shadow: 0 0 50px rgba(0,0,0,1); }
        
        /* Stats Header */
        .header { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; background: #1f2937; padding: 15px; border-radius: 12px; border-bottom: 4px solid var(--gold); margin-bottom: 20px; }
        .stat-box { text-align: center; border-right: 1px solid #374151; }
        .stat-box:last-child { border-right: none; }
        .stat-val { display: block; color: var(--gold-light); font-weight: bold; font-size: 1.2rem; }

        /* Screens */
        .screen { display: none; animation: fadeIn 0.5s; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Buttons & Inputs */
        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        button { background: linear-gradient(145deg, #1f2937, #111827); color: white; border: 1px solid var(--gold); padding: 15px; border-radius: 10px; cursor: pointer; font-family: 'Cairo'; font-weight: bold; transition: 0.3s; }
        button:hover:not(:disabled) { background: var(--gold); color: black; box-shadow: 0 0 15px var(--gold); }
        button:disabled { opacity: 0.3; cursor: not-allowed; }
        input { width: 80%; padding: 15px; background: #000; border: 1px solid var(--gold); color: white; border-radius: 10px; text-align: center; font-size: 1.2rem; }

        /* Leaderboard */
        .leaderboard { margin-top: 30px; background: #000; padding: 15px; border-radius: 10px; border: 1px solid var(--gold); }
        .leader-item { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #222; }
        .rank-1 { color: var(--gold-light); font-weight: bold; }

        /* Shop & Stories */
        .list-container { max-height: 400px; overflow-y: auto; padding: 10px; background: rgba(0,0,0,0.5); border-radius: 10px; }
        .item-card { background: #1f2937; margin-bottom: 10px; padding: 15px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border-right: 5px solid var(--gold); }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

<div id="game-container">
    <div id="login-screen" class="screen active">
        <h1 style="color: var(--gold); font-size: 2.5rem;">âš”ï¸ Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„Ù€ 100 Ù‚ØµØ©</h1>
        <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø£Ù‚ÙˆÙ‰ Ù„Ù„Ù…ØºØ§Ù…Ø±Ø§Øª</p>
        <input type="text" id="username" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±...">
        <div style="margin-top: 20px;">
            <button onclick="login()" style="width: 85%;">Ø¨Ø¯Ø¡ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©</button>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div class="header">
            <div class="stat-box"><span>Ø§Ù„Ø¨Ø·Ù„</span><span class="stat-val" id="p-name">---</span></div>
            <div class="stat-box"><span>Ø§Ù„Ø°Ù‡Ø¨</span><span class="stat-val" id="p-coins">0</span></div>
            <div class="stat-box"><span>Ø§Ù„Ø§Ù†ØªØµØ§Ø±Ø§Øª</span><span class="stat-val" id="p-wins">0</span></div>
        </div>

        <div id="main-menu">
            <div style="background: #111; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                <h3 id="story-title">Ø§Ù„Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h3>
                <p id="story-text">Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ Ù‚Ù„Ø¨ Ø§Ù„Ø¹Ø§ØµÙ…Ø©.. Ø§Ù„Ø¹Ø§Ù„Ù… ÙŠÙ†ØªØ¸Ø± Ø¨Ø·ÙˆÙ„Ø§ØªÙƒ.</p>
            </div>
            <div class="btn-grid">
                <button onclick="mineGold()">â›ï¸ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø´Ø§Ù‚ (+150ğŸ’°)</button>
                <button onclick="switchScreen('shop-screen')">ğŸ›’ Ù…ØªØ¬Ø± Ø§Ù„Ù€ 100 Ù‚ØµØ©</button>
                <button onclick="switchScreen('story-screen')">ğŸ“– Ø®ÙˆØ¶ Ù…ØºØ§Ù…Ø±Ø©</button>
                <button onclick="saveGame()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…</button>
            </div>
        </div>

        <div id="shop-screen" class="screen">
            <h2>ğŸ›’ Ù…ØªØ¬Ø± Ø§Ù„Ø¹ÙˆØ§Ù„Ù…</h2>
            <div class="list-container" id="shop-list"></div>
            <button onclick="switchScreen('main-menu')" style="width: 100%; margin-top: 15px;">ğŸ”™ Ø¹ÙˆØ¯Ø© Ù„Ù„Ø³Ø§Ø­Ø©</button>
        </div>

        <div id="story-screen" class="screen">
            <h2>ğŸ“– Ø§Ù„Ù…ØºØ§Ù…Ø±Ø§Øª Ø§Ù„Ù…ÙØªÙˆØ­Ø©</h2>
            <div class="list-container" id="unlocked-list"></div>
            <button onclick="switchScreen('main-menu')" style="width: 100%; margin-top: 15px;">ğŸ”™ Ø¹ÙˆØ¯Ø© Ù„Ù„Ø³Ø§Ø­Ø©</button>
        </div>

        <div class="leaderboard">
            <h4>ğŸ† Ù‚Ø§Ø¦Ù…Ø© Ø£Ù‚ÙˆÙ‰ 5 Ø£Ø³Ø§Ø·ÙŠØ±</h4>
            <div id="leader-items">
                <div class="leader-item rank-1"><span>1. Ø§Ù„Ù…Ø·ÙˆØ± ğŸ‘‘</span><span>999,999 ğŸ†</span></div>
                <div class="leader-item"><span>2. ØµÙ‚Ø± Ø§Ù„Ø¹Ø±Ø¨</span><span>450 ğŸ†</span></div>
                <div class="leader-item"><span>3. Ù…Ø­Ø§Ø±Ø¨ Ø§Ù„Ù„ÙŠÙ„</span><span>310 ğŸ†</span></div>
                <div class="leader-item"><span>4. Ø¨Ø·Ù„ Ø§Ù„Ø¸Ù„</span><span>120 ğŸ†</span></div>
                <div class="leader-item"><span>5. Ù„Ø§Ø¹Ø¨ Ø¬Ø¯ÙŠØ¯</span><span>5 ğŸ†</span></div>
            </div>
        </div>
    </div>
</div>

<script>
    // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    let player = { name: "", coins: 0, wins: 0, unlocked: [1] };
    
    // Ù…Ø­Ø±Ùƒ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù‚ØµØµ
    const locations = ["ÙƒÙ‡Ù Ø§Ù„Ù…ÙˆØª", "Ø¬Ø²ÙŠØ±Ø© Ø§Ù„Ù†Ø§Ø±", "Ø³Ø±Ø¯Ø§Ø¨ Ø§Ù„Ù…Ù„ÙˆÙƒ", "Ø¨Ø±Ø¬ Ø§Ù„Ø³Ø­Ø±", "ØºØ§Ø¨Ø© Ø§Ù„Ø£Ø±ÙˆØ§Ø­", "Ù‚Ù„Ø¹Ø© Ø§Ù„Ø¸Ù„", "ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø¨Ø±Ù‚"];
    const monsters = ["Ø§Ù„ØªÙ†ÙŠÙ† Ø§Ù„Ø£Ø³ÙˆØ¯", "Ø§Ù„ØºÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ù‚", "Ø¬ÙŠØ´ Ø§Ù„Ù‡ÙŠØ§ÙƒÙ„", "Ø³Ø§Ø­Ø± Ø§Ù„Ø¸Ù„Ø§Ù…", "ÙˆØ­Ø´ Ø§Ù„Ø¨Ø­Ø±", "Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª Ø§Ù„Ù…Ù„Ùƒ"];
    const actions = ["ÙˆØ§Ø¬Ù‡Øª", "ØªØ³Ù„Ù„Øª Ø¥Ù„Ù‰", "Ù‚Ø§ØªÙ„Øª", "Ø¯Ù…Ø±Øª Ø­ØµÙ†", "ÙƒØ´ÙØª Ø³Ø±"];

    function login() {
        const val = document.getElementById('username').value.trim();
        if(!val) return;
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª
        const saved = localStorage.getItem('legend_save_' + val);
        if(saved) player = JSON.parse(saved);
        else player.name = val;

        // Ù…ÙŠØ²Ø© Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ø³Ø±ÙŠØ©
        if(val === "Ù…Ø·ÙˆØ±" || val === "admin") {
            player.name = "ØªÙŠÙ… (Ø§Ù„Ù…Ø·ÙˆØ±)";
            player.coins = 9999999;
            player.wins = 8888;
            player.unlocked = Array.from({length: 100}, (_, i) => i + 1);
        }

        switchScreen('game-screen');
        updateUI();
    }

    function updateUI() {
        document.getElementById('p-name').innerText = player.name;
        document.getElementById('p-coins').innerText = player.coins.toLocaleString();
        document.getElementById('p-wins').innerText = player.wins.toLocaleString();
        renderShop();
        renderStories();
    }

    function mineGold() {
        player.coins += 150;
        document.getElementById('story-text').innerText = "Ù„Ù‚Ø¯ Ù‚Ø¶ÙŠØª ÙŠÙˆÙ…Ø§Ù‹ Ø´Ø§Ù‚Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ ÙˆØ­ØµÙ„Øª Ø¹Ù„Ù‰ Ø§Ù„Ø°Ù‡Ø¨!";
        updateUI();
    }

    function renderShop() {
        const list = document.getElementById('shop-list');
        list.innerHTML = "";
        for(let i=1; i<=100; i++) {
            if(player.unlocked.includes(i)) continue;
            const price = i * 350;
            const div = document.createElement('div');
            div.className = 'item-card';
            div.innerHTML = `<div><strong>Ù…ØºØ§Ù…Ø±Ø© Ø±Ù‚Ù… ${i}</strong><br><small>Ø§Ù„Ø³Ø¹Ø±: ${price}ğŸ’°</small></div>
                             <button onclick="buyStory(${i}, ${price})">Ø´Ø±Ø§Ø¡</button>`;
            list.appendChild(div);
        }
    }

    function buyStory(id, price) {
        if(player.coins >= price) {
            player.coins -= price;
            player.unlocked.push(id);
            updateUI();
        } else { alert("Ù„Ø§ ØªÙ…Ù„Ùƒ Ø°Ù‡Ø¨Ø§Ù‹ ÙƒØ§ÙÙŠØ§Ù‹!"); }
    }

    function renderStories() {
        const list = document.getElementById('unlocked-list');
        list.innerHTML = "";
        player.unlocked.sort((a,b)=>a-b).forEach(id => {
            const div = document.createElement('div');
            div.className = 'item-card';
            div.innerHTML = `<div><strong>Ù…ØºØ§Ù…Ø±Ø© ${id}</strong></div>
                             <button onclick="playStory(${id})">Ø¨Ø¯Ø¡ Ø§Ù„Ø¢Ù†</button>`;
            list.appendChild(div);
        });
    }

    function playStory(id) {
        const loc = locations[id % locations.length];
        const mon = monsters[id % monsters.length];
        const act = actions[id % actions.length];
        const reward = id * 500;
        
        switchScreen('main-menu');
        document.getElementById('story-title').innerText = `Ø§Ù„Ù…Ù‡Ù…Ø©: ${loc}`;
        document.getElementById('story-text').innerText = `ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ØµØ©ØŒ ${act} ${mon} ÙÙŠ ${loc}. Ø¨Ø¹Ø¯ Ù…Ø¹Ø±ÙƒØ© Ù…Ù„Ø­Ù…ÙŠØ©ØŒ Ø§Ù†ØªØµØ±Øª ÙˆØ­ØµÙ„Øª Ø¹Ù„Ù‰ ${reward}ğŸ’° ÙƒØ¬Ø§Ø¦Ø²Ø© Ù„ÙÙˆØ²Ùƒ!`;
        
        player.coins += reward;
        player.wins += 1;
        updateUI();
    }

    function switchScreen(screenId) {
        document.querySelectorAll('.screen, #main-menu').forEach(s => s.classList.remove('active'));
        if(screenId === 'main-menu') {
            document.getElementById('game-screen').classList.add('active');
            document.getElementById('main-menu').classList.add('active');
        } else {
            document.getElementById(screenId).classList.add('active');
            document.getElementById('game-screen').classList.add('active');
        }
    }

    function saveGame() {
        localStorage.setItem('legend_save_' + player.name, JSON.stringify(player));
        alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­!");
    }
</script>

</body>
</html>